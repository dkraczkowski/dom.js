/**
 * DOM.js is a lightweight & fast cross browser library for
 * dom traversal and manipulation.
 *
 * @author Dawid Kraczowski <crac>
 * @license MIT
 */
(function(e,t,n){function i(e,t){if(Array.prototype.indexOf){return Array.prototype.indexOf.call(e,t)}for(var n=0,r=e.length;n<r;n++){if(e[n]===t){return n}}return-1}function s(e){return Object.prototype.toString.call(e)==="[object Array]"}function o(e){return typeof e==="string"}function u(e){return typeof e==="number"&&isFinite(e)}function a(e){return typeof e==="object"}function f(e){return typeof e==="function"}function l(e){return e&&typeof e==="object"&&Object.getPrototypeOf(e)===Object.getPrototypeOf({})}function c(t){if(r.isNode(t)||r.isElement(t)||t===e){return false}var i=l(t)||s(t)||typeof t==="object"&&t!==null&&t["length"]!==n;return i}function h(e){var t;var n;var r;if(!a(e)||e===null){t=e;return t}if(s(e)){t=[];for(var i=0,o=e.length;i<o;i++){t[i]=h(e[i])}return t}try{t=new e.constructor}catch(u){t={}}for(n in e){if(!e.hasOwnProperty(n)){continue}if(a(e[n])&&e[n]!==null){t[n]=h(e[n])}else{t[n]=e[n]}}return t}function p(e,t){for(var n in t){e[n]=t[n]}return e}function d(r,i){var s;if(typeof e.getComputedStyle==="function"){s=e.getComputedStyle(r)}else if(typeof t.currentStyle!==n){s=r.currentStyle}else{s=r.style}if(i){return s[i]}else{return s}}function v(e,t){if(s(e)||typeof e==="object"&&e["length"]!==n){for(var r=0,i=e.length;r<i;r++){t.apply(e[r],[e[r],r])}return}if(l(e)){for(var o in e){t.apply(e[o],[e[o],o])}}}function j(e){r.body=r.findByTagName("body")[0];r.head=r.findByTagName("head")[0];var t=new r.Event(e);y=t;v(m,function(e){e.call(null,t)})}function F(e){var t=new r.Event(e);b=t;v(g,function(e){e.call(null,t)})}var r={};var m=[];var g=[];var y=false;var b=false;var w;var E=t.addEventListener?"addEventListener":"attachEvent";var S=t.removeEventListener?"removeEventListener":"detachEvent";var x=t.addEventListener?"":"on";var T=t.createEvent?"createEvent":"createEventObject";var N=t.dispatchEvent?"dispatchEvent":"fireEvent";var C=["Moz","ms","Webkit","O",""];var k=function(e){return e};var L=e.requestAnimationFrame;var A=e.cancelAnimationFrame||e.cancelRequestAnimationFrame;var O=t.createElement("div");var M=d(O);var _=function(){var e,n=3,r=t.createElement("div"),i=r.getElementsByTagName("i");while(r.innerHTML="<!--[if gt IE "+ ++n+"]><i></i><![endif]-->",i[0]);return n>4?n:e}();if(_&&_<9){k=function(e){for(var t=/-([a-z0-9])/;t.test(e);e=e.replace(t,RegExp.$1.toUpperCase()));return e}}var D=function(){for(var e in C){if(o(M[C[e]+"transition"])){return true}}return false}();if(!L||!A){for(var P=0;P<C.length;P++){var H=C[P];L=L||e[H+"RequestAnimationFrame"];A=A||e[H+"CancelAnimationFrame"]||e[H+"CancelRequestAnimationFrame"]}}if(!L||!A){L=function(t){var n=(new Date).getTime();var r=Math.max(0,16-(n-w));var i=e.setTimeout(function(){t(n+r)},r);w=n+r;return i};A=function(t){e.clearTimeout(t)}}var B=function(e,n){function i(e){function o(e){var t=e.x-n.startX;var r=e.y-n.startY;var i=n.options.grid[0];var s=n.options.grid[1];if(i>=1){t=Math.round(t/i)*i}if(s>=1){r=Math.round(r/s)*s}if(n.options.grid[1]>=1){r-=r%n.options.grid[1]}switch(n.options.axis){case"x":n.deltaX=t;break;case"y":n.deltaY=r;break;default:n.deltaX=t;n.deltaY=r;break}e.target=n.options.handler;n.options.onDragMove.call(n,e)}function u(e){n.isDragging=false;r.removeListener(t,r.Event.ON_MOUSEMOVE,o);r.removeListener(t,r.Event.ON_MOUSEUP,u);var i=n.position.y+n.deltaY+"px";var s=n.position.x+n.deltaX+"px";n.element.style.top=i;n.element.style.left=s;if(D){for(var a in C){var f=C[a]+"transform";n.element.style[f]=""}}n.options.handler.style.cursor=n._savedCursorState;e.target=n.options.handler;n.options.onDragEnd.call(n,e)}if(e.button!=r.Mouse.BUTTON_LEFT){return}e.preventDefault();var n=this;var i=d(n.element);n.isDragging=true;n.deltaX=0;n.deltaY=0;n.position.x=parseInt(i["left"]);n.position.y=parseInt(i["top"]);n.startX=e.x;n.startY=e.y;n.options.onDragStart.call(n,e);if(isNaN(n.position.x)){n.position.x=0}if(isNaN(n.position.y)){n.position.y=0}var s=i["position"];if(s!="relative"&&s!="absolute"){s="relative"}r.css(n.element,{position:s,top:n.position.y+"px",left:n.position.x+"px"});r.css(n.options.handler,{"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none","::selection":"none",cursor:n.options.cursor});(function a(){if(n.isDragging){L(a)}else{return}var e=n.deltaY+"px";var t=n.deltaX+"px";if(D){for(var r in C){var i=C[r]+"transform";n.element.style[i]="translate("+t+","+e+")"}}else{n.element.style.top=n.position.y+n.deltaY+"px";n.element.style.left=n.position.x+n.deltaX+"px"}})();r.onMouseMove(t,o);r.onMouseUp(t,u)}var n=n||{};this.element=e;this.options={onDragStart:n.onDragStart||function(){},onDragMove:n.onDragMove||function(){},onDragEnd:n.onDragEnd||function(){},handler:n.handler||e,cursor:n.cursor||"move",axis:n.axis||false,grid:n.grid||[1,1]};this.isDragging=false;this.position={x:"auto",y:"auto"};this._savedCursorState=this.options.handler.style.cursor;r.onMouseDown(this.options.handler,i.bind(this))};r.isElement=function(e){if(typeof HTMLElement==="object"){return e instanceof HTMLElement}return e&&typeof e==="object"&&e.nodeType===1&&typeof e.nodeName==="string"};r.isNode=function(e){if(typeof Node==="object"){return e instanceof Node}return e&&typeof e==="object"&&typeof e.nodeType==="number"&&typeof e.nodeName==="string"};r.requestAnimationFrame=function(){return L};r.cancelAnimationFrame=function(){return A};r.draggable=function(e,t){return new B(e,t)};r.Event=function(e){this._e=e;r.Event.prototype.stopPropagation=function(){if(this._e.stopPropagation){this._e.stopPropagation()}else{this._e.cancelBubble=true}};r.Event.prototype.preventDefault=function(){if(this._e.preventDefault){this._e.preventDefault()}else{this._e.returnValue=false}};this.target=this._e.target||this._e.srcElement;this.ctrlKey=this._e.ctrlKey;this.shiftKey=this._e.shiftKey;this.altKey=this._e.altKey;this.layerY=this._e.layerY||this._e.offsetY;this.layerX=this._e.layerX||this._e.offsetX;this.x=this._e.x||this._e.clientX;this.y=this._e.y||this._e.clientY;this.keyCode=this._e.keyCode;this.name=this.type=this._e.type;this.path=this._e.path;this.timeStamp=this._e.timeStamp;if(_&_<9){this.button=this._e.button==1?r.Mouse.BUTTON_LEFT:this._e.button==4?r.Mouse.BUTTON_MIDDLE:r.Mouse.BUTTON_RIGHT}else if(this._e.hasOwnProperty("which")){this.button=this._e.which==1?r.Mouse.BUTTON_LEFT:this._e.which==2?r.Mouse.BUTTON_MIDDLE:r.Mouse.BUTTON_RIGHT}else{this.button=this._e.button}};r.Mouse={};r.Mouse.BUTTON_LEFT=0;r.Mouse.BUTTON_MIDDLE=1;r.Mouse.BUTTON_RIGHT=2;r.Event.ON_CLICK="click";r.Event.ON_DBLCLICK="dblclick";r.Event.ON_CONTEXTMENU="contextmenu";r.Event.ON_MOUSEDOWN="mousedown";r.Event.ON_MOUSEENTER="mouseenter";r.Event.ON_MOUSELEAVE="mouseleave";r.Event.OM_MOUSEMOVE="mousemove";r.Event.ON_MOUSEOVER="mouseover";r.Event.ON_MOUSEOUT="mouseout";r.Event.ON_MOUSEUP="mouseup";r.Event.ON_MOUSEMOVE="mousemove";r.Event.ON_KEYDOWN="keydown";r.Event.ON_KEYUP="keyup";r.Event.ON_KEYPRESS="keypress";r.Event.ON_SELECT="select";r.Event.ON_RESET="reset";r.Event.ON_FOCUS="focus";r.Event.ON_BLUR="blur";r.Event.ON_SUBMIT="submit";r.Event.ON_CHANGE="change";r.Event.ON_LOAD="load";r.Event.ON_UNLOAD="unload";r.Event.ON_RESIZE="resize";r.Event.ON_UNLOAD="unload";r.Event.ON_ERROR="error";r.Event.ON_SCROLL="scroll";r.Event.ON_DRAG="drag";r.Event.ON_DRAGSTART="dragstart";r.Event.ON_DRAGEND="dragend";r.Event.ON_DRAGENTER="dragenter";r.Event.ON_DRAGLEAVE="dragleave";r.Event.ON_DRAGOVER="dragover";r.Event.ON_DROP="drop";r.Event.ON_DOM_DRAGSTART="onDomDragStart";r.Event.ON_DOM_DRAGEND="onDomDragEnd";r.Event.ON_DOM_DRAGMOVE="onDomDragMove";r.Event.ON_DOM_DROP="onDomDrop";r.Event.ON_DOM_DRAGENTER="onDomDragEnter";r.Event.ON_DOM_DRAGLEAVE="onDomDragLeave";r.addListener=function(t,s,o){if(t===n){throw new Error("Parameter cannot be undefined")}if(c(t)){v(t,function(e,t){r.addListener(e,s,o)});return r}if(!r.isNode(t)&&t!==e){throw new Error(t+" is not a DOMNode object")}t._event=t._event||{};t._event[s]=t._event[s]||{keys:[],values:[]};if(i(t._event[s].keys,o)!=-1){return r}t._event[s].keys.push(o);var u=function(e){var n=new r.Event(e);if(o.call(t,n)===false){e.stop()}};t._event[s].values.push(u);t[E](x+s,u);return r};r.dispatch=function(e,i,s){if(e===n){throw new Error("Parameter cannot be undefined")}if(c(e)){v(e,function(e,t){r.dispatch(e,i,s)});return r}if(!r.isNode(e)){throw new Error(e+" is not a DOMNode object")}if(!s){s={}}var o={type:i,view:s.view||e.ownerDocument.defaultView,detail:s.detail||1,screenX:s.screenX||0,screenY:s.screenY||0,clientX:s.clientX||0,clientY:s.clientY||0,button:s.button||0,ctrlKey:s.ctrlKey||false,altKey:s.altKey||false,shiftKey:s.shiftKey||false,metaKey:s.metaKey||false,bubbles:s.bubbles||true,cancelable:s.cancelable||true};var u={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/};var a="Event";var f;for(var l in u){if(u[l].test(i)){a=l;break}}if(t.createEvent){f=e.ownerDocument.createEvent(a);if(a=="MouseEvents"){f.initMouseEvent(o.type,o.bubbles,o.cancelable,o.view,o.detail,o.screenX,o.screenY,o.clientX,o.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,0,null)}else{f.initEvent(i,o.bubbles,o.cancelable)}e.dispatchEvent(f);return r}else if(t.createEventObject){o.clientX=o.pointerX;o.clientY=o.pointerY;f=t.createEventObject();for(var h in o){f[h]=o[h]}e.fireEvent(x+i,f);return r}};r.removeListener=function(t,s,o){if(t===n){throw new Error("Parameter cannot be undefined")}if(c(t)){v(t,function(e,t){r.removeListener(e,s,o)});return r}if(!r.isNode(t)&&t!==e){throw new Error(t+" is not a DOMNode object")}if(!t._event||!t._event[s]){return false}var u=i(t._event[s].keys,o);if(u===-1){return false}var a=t._event[s].values[u];t[S](x+s,a);delete t._event[s].values[u];delete t._event[s].keys[u];return r};r.hasListener=function(t,n,s){if(!r.isNode(t)&&t!==e){throw new Error(t+" is not a DOMNode object")}if(!t._event||!t._event[n]){return false}return i(t._event[n].keys,s)!==-1};r.onClick=function(e,t){return r.addListener(e,r.Event.ON_CLICK,t)};r.onDblClick=function(e,t){return r.addListener(e,r.Event.ON_DBLCLICK,t)};r.onMouseOver=function(e,t){return r.addListener(e,r.Event.ON_MOUSEOVER,t)};r.onMouseOut=function(e,t){return r.addListener(e,r.Event.ON_MOUSEOUT,t)};r.onMouseDown=function(e,t){return r.addListener(e,r.Event.ON_MOUSEDOWN,t)};r.onMouseUp=function(e,t){return r.addListener(e,r.Event.ON_MOUSEUP,t)};r.onMouseEnter=function(e,t){return r.addListener(e,r.Event.ON_MOUSEENTER,t)};r.onMouseLeave=function(e,t){return r.addListener(e,r.Event.ON_MOUSELEAVE,t)};r.onMouseMove=function(e,t){return r.addListener(e,r.Event.ON_MOUSEMOVE,t)};r.onDrag=function(e,t){return r.addListener(e,r.Event.ON_DRAG,t)};r.onDragStart=function(e,t){return r.addListener(e,r.Event.ON_DRAGSTART,t)};r.onDragEnd=function(e,t){return r.addListener(e,r.Event.ON_DRAGEND,t)};r.onFocus=function(e,t){return r.addListener(e,r.Event.ON_FOCUS,t)};r.onBlur=function(e,t){return r.addListener(e,r.Event.ON_BLUR,t)};r.onSelect=function(e,t){return r.addListener(e,r.Event.ON_SELECT,t)};r.onChange=function(e,t){return r.addListener(e,r.Event.ON_CHANGE,t)};r.onSubmit=function(e,t){return r.addListener(e,r.Event.ON_SUBMIT,t)};r.onReset=function(e,t){return r.addListener(e,r.Event.ON_RESET,t)};r.onLoad=function(e,t){return r.addListener(e,r.Event.ON_LOAD,t)};r.onScroll=function(e,t){return r.addListener(e,r.Event.ON_SCROLL,t)};r.onUnload=function(e,t){return r.addListener(e,r.Event.ON_UNLOAD,t)};r.onResize=function(e,t){return r.addListener(e,r.Event.ON_RESIZE,t)};r.onKeyDown=function(e,t){return r.addListener(e,r.Event.ON_KEYDOWN,t)};r.onKeyUp=function(e,t){return r.addListener(e,r.Event.ON_KEYUP,t)};r.onKeyPress=function(e,t){return r.addListener(e,r.Event.ON_KEYPRESS,t)};r.find=function(e,n){var i=[];if(r.isNode(n)){i=n.querySelectorAll(e)}else{i=t.querySelectorAll(e)}return i};r.id=function(e){return t.getElementById(e)};r.findByTagName=function(e){return t.getElementsByTagName(e)};r.findByClass=function(e){if(e.substring(0,1)=="."){e=e.substring(1)}if(t.getElementsByClassName){return t.getElementsByClassName(e)}if(t.querySelector&&t.querySelectorAll){return t.querySelectorAll("."+e)}};r.offset=function(e){if(!r.isElement(e)){return false}var t=e.getBoundingClientRect();var n={top:Math.round(t.top),right:Math.round(t.right),bottom:Math.round(t.bottom),left:Math.round(t.left),width:t.width?Math.round(t.width):Math.round(e.offsetWidth),height:t.height?Math.round(t.height):Math.round(e.offsetHeight)};if(n.width<=0){n.width=parseFloat(d(e,"width"))}if(n.height<=0){n.height=parseFloat(d(e,"height"))}return n};r.width=function(e){return r.offset(e).width};r.height=function(e){return r.offset(e).height};r.parent=function(e){if(!r.isNode(e)){throw new Error(e+" is not a DOMNode object")}return e.parentNode};r.children=function(e,t){if(typeof t==="boolean"&&t){return e.childNodes}var n=[];if(o(t)){for(var r=0,i=e.childNodes.length;r<i;r++){if(e.childNodes[r].nodeName.toLowerCase()===t.toLowerCase()){n.push(e.childNodes[r])}}return n}for(var r in e.childNodes){if(e.childNodes[r].nodeType===1){n.push(e.childNodes[r])}}return n};r.next=function(e){if(!r.isNode(e)){throw new Error(e+" is not a DOMNode object")}var t=e.nextSibling;if(t.nodeType!=1){return r.next(t)}return t};r.previous=function(e){if(!r.isNode(e)){throw new Error(e+" is not a DOMNode object")}var t=e.previousSibling;if(t.nodeType!=1){return r.previous(t)}return t};r.attribute=function(e,t){if(!r.isNode(e)){throw new Error(e+" is not a DOMNode object")}if(typeof t==="string"){var i;if(t==="class"&&e["className"]!==n){i=e.className}else if(t==="for"&&e["htmlFor"]!==n){i=e.htmlFor}else if(t==="value"&&e["value"]!==n){i=e.value}else{i=e.getAttribute(t)}if(i===""){i=null}return i}if(s(t)){var i={};for(var o in t){i[t[o]]=r.attribute(e,t[o])}return i}if(l(t)){for(var o in t){if(t[o]===null){e.removeAttribute(o)}else{e.setAttribute(o,t[o])}}return t}return false};r.css=function(e,t){if(c(e)&&l(t)){v(e,function(e){r.css(e,t)});return r}if(!r.isNode(e)){throw new Error(e+" is not a DOMNode object")}if(typeof t==="string"){return d(e,k(t))}if(s(t)){var n={};for(var i in t){n[t[i]]=d(e,k(t[i]))}return n}if(l(t)){for(var i in t){e.style[k(i)]=t[i]}return t}return false};r.getClass=function(e){if(!r.isNode(e)){throw new Error(e+" is not a DOMNode object")}var t=r.attribute(e,"class");if(!t){return[]}t=t.split(" ");var n=[];for(var i in t){if(t[i]===""){continue}n.push(t[i])}return n};r.hasClass=function(e,t){if(!r.isNode(e)){throw new Error(e+" is not a DOMNode object")}if(o(t)){return i(r.getClass(e),t)>-1?true:false}else if(s(t)){var n=r.getClass(e);for(var u in t){if(i(t[u],n)===-1){return false}}return true}else{return false}return false};r.addClass=function(e,t){if(e===n){throw new Error("Dom.addClass first parameter cannot be undefined")}if(c(e)){v(e,function(e){r.addClass(e,t)});return r}if(!r.isNode(e)){throw new Error(e+" is not a DOMNode object")}if(s(t)){for(var o in t){r.addClass(e,t[o])}return r}var u=r.getClass(e);if(i(u,t)===-1){u.push(t)}u=u.join(" ");return r.attribute(e,{"class":u})};r.removeClass=function(e,t){if(e===n){throw new Error("Dom.removeClass first parameter cannot be undefined")}if(c(e)){v(e,function(e){r.removeClass(e,t)});return r}if(!r.isNode(e)){throw new Error("Dom.removeClass"+e+" is not a DOMNode object")}if(!t){return r.attribute(e,{"class":null})}var s=r.getClass(e);var o=i(s,t);if(o===-1){return}s.splice(o,1);return r.attribute(e,{"class":s.join(" ")})};r.create=function(e){var n=t.createElement("tbody");var i=t.createDocumentFragment();r.html(n,e);var s=r.children(n);for(var o=0,u=s.length;o<u;o++){r.append(i,s[o])}return i};r.copy=function(e){if(!r.isNode(e)){throw new Error("Dom.copy"+e+" is not a DOMNode object")}return e.cloneNode(true)};r.html=function(e,t){if(!r.isNode(e)){throw new Error("Dom.html"+e+" is not a DOMNode object")}if(o(t)){e.innerHTML=t;return t}return e.innerHTML};r.text=function(e,t){if(!r.isNode(e)){throw new Error("Dom.text "+e+" is not a DOMNode object")}if(o(t)){if(e.innerText){e.innerText=t}else{e.textContent=t}return t}if(e.innerText){return e.innerText}return e.textContent};r.template=function(e,t){var n=/\{\{.*?\}\}/gi;return e.replace(n,function(n,r,i){var s=n.replace("{{","").replace("}}","").trim().split(" ");var a=s[0];if(!a||!t.hasOwnProperty(a)){return""}if(f(t[a])){return t[a].apply(i,s)}if(o(t[a])||u(t[a])){return t[a]}return""})};r.append=function(e,t){if(!r.isNode(e)){throw new Error("Dom.append "+e+" is not a DOMNode object")}if(o(t)){t=r.create(t)}e.appendChild(t);return t};r.prepend=function(e,t){if(!r.isNode(e)){throw new Error("Dom.prepend "+e+" is not a DOMNode object")}if(o(t)){t=r.create(t)}e.insertBefore(t,e.firstChild);return t};r.after=function(e,t){if(!r.isNode(e)){throw new Error("Dom.after "+e+" is not a DOMNode object")}if(o(t)){t=r.create(t)}e.parentNode.insertBefore(t,e.nextSibling);return t};r.before=function(e,t){if(!r.isNode(e)){throw new Error("Dom.before "+e+" is not a DOMNode object")}if(o(t)){t=r.create(t)}e.insertBefore(t,e);return t};r.replace=function(e,t){if(!r.isNode(e)){throw new Error("Dom.replace "+e+" is not a DOMNode object")}if(o(t)){t=r.create(t)}e.parentNode.replaceChild(t,e);return t};r.remove=function(e){if(!r.isNode(e)){throw new Error("Dom.remove "+e+" is not a DOMNode object")}var t=e.parentNode;return t.removeChild(e)};r.data=function(e,t){if(!r.isNode(e)){throw new Error("Dom.data "+e+" is not a DOMNode object")}if(t===n){if(e.hasOwnProperty("dataset")){var i={};for(var u in e.dataset){i[u]=e.dataset[u]}return i}else{var i={};for(var u=0,a=e.attributes,f=a.length;u<f;u++){var c=a.item(u);if(c.nodeName.substr(0,5)!=="data-"){continue}i[c.nodeName.substr(5)]=c.nodeValue}return i}}if(o(t)){return r.attribute(e,"data-"+t)}if(s(t)){var i={};for(var u=0,f=t.length;u<f;u++){var h=t[u];i[h]=r.attribute(e,"data-"+h)}return i}if(l(t)){var p={};for(var u in t){var d=t[u];p["data-"+u]=d}r.attribute(e,p)}};r.loaded=function(e){if(b!==false){e.call(null,b);return r}g.push(e);return r};r.ready=function(e){if(y!==false){e.call(null,y);return r}m.push(e);return r};if(e.onload!==null){g.push(e.onload)}e.onload=F;if(E==="attachEvent"){t[E]("onreadystatechange",function(e){if(t.readyState==="complete"){t[S]("onreadystatechange",arguments.callee);j(e)}})}else{t[E]("DOMContentLoaded",function(e){t[S]("DOMContentLoaded",arguments.callee,false);j(e)},false)}e.Dom=r})(this,document)